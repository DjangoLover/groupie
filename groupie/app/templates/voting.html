{% extends "base.html" %}
{% load jstemplate %}

{% block main %}
{% mustachejs "voters" %}

<div class="container">
  <form action="{% url 'voting' voting.url_hash %}?ref={{ voter.ref_hash }}" method="post">
    {% csrf_token %}
    
    <div class="row">
      <div class="col-lg-12">
        {% if is_creator %}
        <h2>Some header</h2>
        <h4>You asked your friends what's their preference when to do <em>{{ voting.description }}</em></h4>
        {% else %}
      	<h2>{{ voting.creator.email }}</h2>
      	<h4>Invited wants to know what do you think about <em>{{ voting.description }}</em></h4>
        {% endif %}
        {% if voting.deadline %}
        <p>Please fill out this form until {{ voting.deadline }}, after that voting will be closed...</p>
        {% endif %}
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
      	<p>Your options are:</p>
      </div>
      {% for option in voting_options %}
      <div class="col-sm-6 col-md-3">
    	<div class="thumbnail vote-{{ option.vote }}" data-option="{{ option.id }}">
          <h4 class="text-center">{{ option.date|date:'d/m/Y' }}</h4>
          <h2 class="text-center">{{ option.time|date:'H:i' }}</h2>
  	</div>
        <span class="nr_of_votes" data-voters="{{ option.voters }}" data-nr-of-votes="{{ option.nr_of_votes }}">
          {{ option.nr_of_votes }} vote{{ option.nr_of_votes|pluralize }}
        </span>
      </div>
      {% endfor %}
    </div>
    <div class="row">
      <div class="col-lg-12">
        <input class="btn btn-primary" type="submit" value="save" />
        <p>If you cannot make it then submit an empty form</p>
      </div>
    </div>
    <div class="row" style="display: none">
      <div class="col-lg-12">
        {{ form.as_table }}
      </div>
    </div>
  </form>
</div>
{% endblock main %}
